<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¹ãƒ­ãƒƒãƒˆåŒ–ç‰©èª è¨­å®šæ¨æ¸¬ãƒ„ãƒ¼ãƒ«</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Hiragino Kaku Gothic ProN', 'Yu Gothic', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 28px;
            color: #ff6b9d;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .header p {
            font-size: 14px;
            color: #a0c4ff;
        }

        .section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .section-title {
            font-size: 20px;
            color: #ffd700;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(255, 215, 0, 0.3);
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: #a0c4ff;
            font-size: 14px;
        }

        .input-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-size: 16px;
        }

        .input-group input:focus {
            outline: none;
            border-color: #ff6b9d;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 87, 108, 0.4);
        }

        .results {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .result-item {
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            border-left: 4px solid;
        }

        .setting-1 { background: rgba(128, 128, 128, 0.2); border-color: #808080; }
        .setting-2 { background: rgba(0, 255, 0, 0.2); border-color: #00ff00; }
        .setting-3 { background: rgba(0, 191, 255, 0.2); border-color: #00bfff; }
        .setting-4 { background: rgba(255, 215, 0, 0.2); border-color: #ffd700; }
        .setting-5 { background: rgba(255, 140, 0, 0.2); border-color: #ff8c00; }
        .setting-6 { background: rgba(255, 0, 0, 0.2); border-color: #ff0000; }

        .probability {
            font-size: 24px;
            font-weight: bold;
            margin-top: 10px;
        }

        .info-text {
            font-size: 12px;
            color: #a0c4ff;
            margin-top: 5px;
        }

        .judge-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
        }

        .judge-label {
            color: #a0c4ff;
        }

        .judge-result {
            font-weight: bold;
            padding: 5px 15px;
            border-radius: 5px;
        }

        .judge-good {
            background: rgba(0, 255, 0, 0.3);
            color: #00ff00;
        }

        .judge-bad {
            background: rgba(255, 0, 0, 0.3);
            color: #ff6b6b;
        }

        .judge-normal {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
        }

        .ending-screen-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .ending-btn {
            padding: 10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .ending-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .ending-btn.selected {
            background: #ff6b9d;
            border-color: #ff6b9d;
        }

        .trophy-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .trophy-btn {
            padding: 8px 15px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .trophy-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .trophy-btn.selected {
            background: #ffd700;
            border-color: #ffd700;
            color: #000;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“Š ã‚¹ãƒ­ãƒƒãƒˆåŒ–ç‰©èª è¨­å®šæ¨æ¸¬ãƒ„ãƒ¼ãƒ«</h1>
            <p>å®Ÿæˆ¦ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã—ã¦è¨­å®šã‚’æ¨æ¸¬ã—ã‚ˆã†ï¼</p>
        </div>

        <!-- åŸºæœ¬ãƒ‡ãƒ¼ã‚¿å…¥åŠ› -->
        <div class="section">
            <div class="section-title">ğŸ° åŸºæœ¬ãƒ‡ãƒ¼ã‚¿</div>
            <div class="grid-2">
                <div class="input-group">
                    <label>ç·å›è»¢æ•°</label>
                    <input type="number" id="totalGames" placeholder="ä¾‹: 3000">
                </div>
                <div class="input-group">
                    <label>ç¾åœ¨ã‚²ãƒ¼ãƒ æ•°</label>
                    <input type="number" id="currentGames" placeholder="ä¾‹: 450">
                </div>
            </div>
        </div>

        <!-- ATãƒ»è§£å‘ªãƒå„€ãƒ‡ãƒ¼ã‚¿ -->
        <div class="section">
            <div class="section-title">âœ¨ ATãƒ»CZå®Ÿç¸¾</div>
            <div class="grid-2">
                <div class="input-group">
                    <label>ATåˆå½“ãŸã‚Šå›æ•°</label>
                    <input type="number" id="atCount" placeholder="ä¾‹: 5">
                </div>
                <div class="input-group">
                    <label>è§£å‘ªãƒå„€çªå…¥å›æ•°</label>
                    <input type="number" id="czCount" placeholder="ä¾‹: 12">
                </div>
            </div>
        </div>

        <!-- å°å½¹ã‚«ã‚¦ãƒ³ãƒˆ -->
        <div class="section">
            <div class="section-title">ğŸ² å°å½¹ã‚«ã‚¦ãƒ³ãƒˆï¼ˆé€šå¸¸æ™‚ã®ã¿ï¼‰</div>
            <div class="grid-2">
                <div class="input-group">
                    <label>ã‚¹ã‚¤ã‚«å‡ºç¾å›æ•°</label>
                    <input type="number" id="suikaCount" placeholder="ä¾‹: 35">
                </div>
                <div class="input-group">
                    <label>å¼±ãƒã‚§ãƒªãƒ¼å‡ºç¾å›æ•°ï¼ˆé€šå¸¸æ™‚ã®ã¿ï¼‰</label>
                    <input type="number" id="weakCherryCount" placeholder="ä¾‹: 25">
                </div>
            </div>
            <div class="input-group" style="margin-top: 15px;">
                <label>å¼±ãƒã‚§ãƒªãƒ¼ã‹ã‚‰ã®ATç›´æ’ƒå›æ•°</label>
                <input type="number" id="directAtCount" placeholder="ä¾‹: 1">
            </div>
        </div>

        <!-- è¨­å®šç¤ºå”†æ¼”å‡º -->
        <div class="section">
            <div class="section-title">ğŸ­ è¨­å®šç¤ºå”†æ¼”å‡º</div>
            
            <div class="input-group">
                <label>ATçµ‚äº†ç”»é¢ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</label>
                <div class="ending-screen-buttons">
                    <button class="ending-btn" data-screen="koyomi">ã“ã‚ˆã¿</button>
                    <button class="ending-btn" data-screen="hitagi">ã²ãŸã</button>
                    <button class="ending-btn" data-screen="mayoi">ã¾ã‚ˆã„</button>
                    <button class="ending-btn" data-screen="suruga">ã™ã‚‹ãŒ</button>
                    <button class="ending-btn" data-screen="nadeko">ãªã§ã“</button>
                    <button class="ending-btn" data-screen="tsubasa">ã¤ã°ã•</button>
                    <button class="ending-btn" data-screen="shinobu">ã—ã®ã¶</button>
                    <button class="ending-btn" data-screen="oshino">å¿é‡</button>
                    <button class="ending-btn" data-screen="panel1">åˆä»£ãƒ‘ãƒãƒ«(æš¦å¿é‡)</button>
                    <button class="ending-btn" data-screen="panel2">åˆä»£ãƒ‘ãƒãƒ«(ãƒ’ãƒ­ã‚¤ãƒ³)</button>
                    <button class="ending-btn" data-screen="iloveyou">I LOVE YOU</button>
                </div>
            </div>

            <div class="input-group" style="margin-top: 20px;">
                <label>ã‚µãƒŸãƒ¼ãƒˆãƒ­ãƒ•ã‚£ãƒ¼å‡ºç¾</label>
                <div class="trophy-buttons">
                    <button class="trophy-btn" data-trophy="bronze">éŠ…</button>
                    <button class="trophy-btn" data-trophy="silver">éŠ€</button>
                    <button class="trophy-btn" data-trophy="gold">é‡‘</button>
                    <button class="trophy-btn" data-trophy="kirin">ã‚­ãƒªãƒ³æŸ„</button>
                    <button class="trophy-btn" data-trophy="rainbow">è™¹</button>
                </div>
            </div>

            <div class="grid-2" style="margin-top: 20px;">
                <div class="input-group">
                    <label>ç²å¾—æšæ•°è¡¨ç¤ºï¼ˆ174æš/543æš/331æšï¼‰</label>
                    <input type="text" id="maisuDisplay" placeholder="ä¾‹: 174">
                </div>
                <div class="input-group">
                    <label>ãƒœãƒ¼ãƒŠã‚¹ç¢ºå®šç”»é¢ã€Œã—ã®ã¶ã€â†’èµ¤7</label>
                    <input type="number" id="shinobuRed7" placeholder="ä¾‹: 1">
                </div>
            </div>
        </div>

        <!-- ãƒœã‚¿ãƒ³ -->
        <div class="button-group">
            <button class="btn btn-primary" onclick="calculateSetting()">ğŸ“Š è¨­å®šæ¨æ¸¬</button>
            <button class="btn btn-secondary" onclick="resetData()">ğŸ”„ ãƒªã‚»ãƒƒãƒˆ</button>
        </div>

        <!-- çµæœè¡¨ç¤º -->
        <div id="results" style="display: none;">
            <div class="section">
                <div class="section-title">ğŸ“ˆ æ¨æ¸¬çµæœ</div>
                <div class="results">
                    <div id="settingResults"></div>
                    <div style="margin-top: 20px;">
                        <h3 style="color: #ffd700; margin-bottom: 10px;">å„è¦ç´ ã®åˆ¤å®š</h3>
                        <div id="judgements"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedScreens = [];
        let selectedTrophy = null;

        // çµ‚äº†ç”»é¢ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆ
        document.querySelectorAll('.ending-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const screen = this.getAttribute('data-screen');
                if (selectedScreens.includes(screen)) {
                    selectedScreens = selectedScreens.filter(s => s !== screen);
                    this.classList.remove('selected');
                } else {
                    selectedScreens.push(screen);
                    this.classList.add('selected');
                }
            });
        });

        // ãƒˆãƒ­ãƒ•ã‚£ãƒ¼ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆ
        document.querySelectorAll('.trophy-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.trophy-btn').forEach(b => b.classList.remove('selected'));
                const trophy = this.getAttribute('data-trophy');
                if (selectedTrophy === trophy) {
                    selectedTrophy = null;
                } else {
                    selectedTrophy = trophy;
                    this.classList.add('selected');
                }
            });
        });

        function calculateSetting() {
            const totalGames = parseInt(document.getElementById('totalGames').value) || 0;
            const atCount = parseInt(document.getElementById('atCount').value) || 0;
            const czCount = parseInt(document.getElementById('czCount').value) || 0;
            const suikaCount = parseInt(document.getElementById('suikaCount').value) || 0;
            const weakCherryCount = parseInt(document.getElementById('weakCherryCount').value) || 0;
            const directAtCount = parseInt(document.getElementById('directAtCount').value) || 0;
            const maisuDisplay = document.getElementById('maisuDisplay').value;
            const shinobuRed7 = parseInt(document.getElementById('shinobuRed7').value) || 0;

            if (totalGames === 0) {
                alert('ç·å›è»¢æ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            // å„è¨­å®šã®æœŸå¾…å€¤ãƒ‡ãƒ¼ã‚¿
            const settingData = {
                1: { at: 265.1, cz: 93.0, suika: 87.4, weakCherry: 150 },
                2: { at: 260.7, cz: 88.8, suika: 85, weakCherry: 145 },
                3: { at: 252.1, cz: 85.3, suika: 82, weakCherry: 140 },
                4: { at: 238.8, cz: 81.0, suika: 78, weakCherry: 135 },
                5: { at: 230.8, cz: 76.5, suika: 75, weakCherry: 130 },
                6: { at: 219.6, cz: 61.4, suika: 69.9, weakCherry: 120 }
            };

            // å®Ÿæ¸¬ç¢ºç‡
            const atProb = atCount > 0 ? totalGames / atCount : 0;
            const czProb = czCount > 0 ? totalGames / czCount : 0;
            const suikaProb = suikaCount > 0 ? totalGames / suikaCount : 0;
            const weakCherryProb = weakCherryCount > 0 ? totalGames / weakCherryCount : 0;

            // ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°
            let scores = { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0 };
            let judgements = [];

            // ATç¢ºç‡è©•ä¾¡
            if (atCount > 0) {
                for (let setting in settingData) {
                    const diff = Math.abs(atProb - settingData[setting].at);
                    scores[setting] += Math.max(0, 100 - diff);
                }
                let atJudge = 'normal';
                let atText = 'æ¨™æº–çš„';
                if (atProb < 240) {
                    atJudge = 'good';
                    atText = 'é«˜è¨­å®šã®æœŸå¾…å¤§ï¼';
                } else if (atProb > 260) {
                    atJudge = 'bad';
                    atText = 'ä½è¨­å®šã®å¯èƒ½æ€§';
                }
                judgements.push({ 
                    label: 'ATåˆå½“ãŸã‚Šç¢ºç‡', 
                    value: `1/${atProb.toFixed(1)}`, 
                    judge: atJudge,
                    text: atText
                });
            }

            // CZç¢ºç‡è©•ä¾¡
            if (czCount > 0) {
                for (let setting in settingData) {
                    const diff = Math.abs(czProb - settingData[setting].cz);
                    scores[setting] += Math.max(0, 100 - diff * 1.5);
                }
                let czJudge = 'normal';
                let czText = 'æ¨™æº–çš„';
                if (czProb < 80) {
                    czJudge = 'good';
                    czText = 'é«˜è¨­å®šç¤ºå”†';
                } else if (czProb > 90) {
                    czJudge = 'bad';
                    czText = 'ä½è¨­å®šã®å¯èƒ½æ€§';
                }
                judgements.push({ 
                    label: 'è§£å‘ªãƒå„€ç¢ºç‡', 
                    value: `1/${czProb.toFixed(1)}`, 
                    judge: czJudge,
                    text: czText
                });
            }

            // ã‚¹ã‚¤ã‚«ç¢ºç‡è©•ä¾¡
            if (suikaCount > 0) {
                for (let setting in settingData) {
                    const diff = Math.abs(suikaProb - settingData[setting].suika);
                    scores[setting] += Math.max(0, 100 - diff * 2);
                }
                let suikaJudge = 'normal';
                let suikaText = 'æ¨™æº–çš„';
                if (suikaProb < 75) {
                    suikaJudge = 'good';
                    suikaText = 'é«˜è¨­å®šã®æœŸå¾…ï¼';
                } else if (suikaProb > 85) {
                    suikaJudge = 'bad';
                    suikaText = 'ä½è¨­å®šã®å¯èƒ½æ€§';
                }
                judgements.push({ 
                    label: 'ã‚¹ã‚¤ã‚«å‡ºç¾ç‡', 
                    value: `1/${suikaProb.toFixed(1)}`, 
                    judge: suikaJudge,
                    text: suikaText
                });
            }

            // å¼±ãƒã‚§ãƒªãƒ¼ç¢ºç‡è©•ä¾¡
            if (weakCherryCount > 0) {
                for (let setting in settingData) {
                    const diff = Math.abs(weakCherryProb - settingData[setting].weakCherry);
                    scores[setting] += Math.max(0, 100 - diff * 1.5);
                }
                let cherryJudge = 'normal';
                let cherryText = 'æ¨™æº–çš„';
                if (weakCherryProb < 130) {
                    cherryJudge = 'good';
                    cherryText = 'é«˜è¨­å®šç¤ºå”†';
                } else if (weakCherryProb > 145) {
                    cherryJudge = 'bad';
                    cherryText = 'ä½è¨­å®šã®å¯èƒ½æ€§';
                }
                judgements.push({ 
                    label: 'å¼±ãƒã‚§ãƒªãƒ¼å‡ºç¾ç‡', 
                    value: `1/${weakCherryProb.toFixed(1)}`, 
                    judge: cherryJudge,
                    text: cherryText
                });
            }

            // å¼±ãƒã‚§ãƒªãƒ¼ç›´æ’ƒè©•ä¾¡
            if (directAtCount > 0) {
                scores[4] += 50;
                scores[5] += 80;
                scores[6] += 100;
                judgements.push({ 
                    label: 'å¼±ãƒã‚§ãƒªãƒ¼ç›´æ’ƒ', 
                    value: `${directAtCount}å›`, 
                    judge: 'good',
                    text: 'é«˜è¨­å®šã®æœŸå¾…å¤§ï¼'
                });
            }

            // çµ‚äº†ç”»é¢è©•ä¾¡
            if (selectedScreens.includes('iloveyou')) {
                scores[6] += 200;
                judgements.push({ label: 'ATçµ‚äº†ç”»é¢', value: 'I LOVE YOU', judge: 'good', text: 'è¨­å®š6æ¿ƒåšï¼' });
            } else if (selectedScreens.includes('panel2')) {
                scores[5] += 150;
                scores[6] += 150;
                judgements.push({ label: 'ATçµ‚äº†ç”»é¢', value: 'åˆä»£ãƒ‘ãƒãƒ«(ãƒ’ãƒ­ã‚¤ãƒ³)', judge: 'good', text: 'è¨­å®š5ä»¥ä¸Šæ¿ƒåšï¼' });
            } else if (selectedScreens.includes('panel1')) {
                scores[4] += 100;
                scores[5] += 100;
                scores[6] += 100;
                judgements.push({ label: 'ATçµ‚äº†ç”»é¢', value: 'åˆä»£ãƒ‘ãƒãƒ«(æš¦å¿é‡)', judge: 'good', text: 'è¨­å®š4ä»¥ä¸Šæ¿ƒåšï¼' });
            } else if (selectedScreens.includes('shinobu')) {
                scores[2] += 80;
                scores[4] += 80;
                scores[6] += 80;
                judgements.push({ label: 'ATçµ‚äº†ç”»é¢', value: 'ã—ã®ã¶', judge: 'good', text: 'å¶æ•°è¨­å®šæ¿ƒåš' });
            } else if (selectedScreens.includes('oshino')) {
                scores[3] += 60;
                scores[5] += 60;
                scores[6] += 60;
                judgements.push({ label: 'ATçµ‚äº†ç”»é¢', value: 'å¿é‡', judge: 'good', text: 'è¨­å®š1,2,4å¦å®š' });
            }

            // ãƒˆãƒ­ãƒ•ã‚£ãƒ¼è©•ä¾¡
            if (selectedTrophy === 'rainbow') {
                scores[6] += 200;
                judgements.push({ label: 'ã‚µãƒŸãƒ¼ãƒˆãƒ­ãƒ•ã‚£ãƒ¼', value: 'è™¹', judge: 'good', text: 'è¨­å®š6æ¿ƒåšï¼' });
            } else if (selectedTrophy === 'kirin') {
                scores[5] += 150;
                scores[6] += 150;
                judgements.push({ label: 'ã‚µãƒŸãƒ¼ãƒˆãƒ­ãƒ•ã‚£ãƒ¼', value: 'ã‚­ãƒªãƒ³æŸ„', judge: 'good', text: 'è¨­å®š5ä»¥ä¸Šæ¿ƒåšï¼' });
            } else if (selectedTrophy === 'gold') {
                scores[4] += 100;
                scores[5] += 100;
                scores[6] += 100;
                judgements.push({ label: 'ã‚µãƒŸãƒ¼ãƒˆãƒ­ãƒ•ã‚£ãƒ¼', value: 'é‡‘', judge: 'good', text: 'è¨­å®š4ä»¥ä¸Šæ¿ƒåšï¼' });
            } else if (selectedTrophy === 'silver') {
                scores[3] += 80;
                scores[4] += 80;
                scores[5] += 80;
                scores[6] += 80;
                judgements.push({ label: 'ã‚µãƒŸãƒ¼ãƒˆãƒ­ãƒ•ã‚£ãƒ¼', value: 'éŠ€', judge: 'good', text: 'è¨­å®š3ä»¥ä¸Šæ¿ƒåšï¼' });
            } else if (selectedTrophy === 'bronze') {
                for (let i = 2; i <= 6; i++) scores[i] += 50;
                judgements.push({ label: 'ã‚µãƒŸãƒ¼ãƒˆãƒ­ãƒ•ã‚£ãƒ¼', value: 'éŠ…', judge: 'good', text: 'è¨­å®š2ä»¥ä¸Šæ¿ƒåšï¼' });
            }

            // ç²å¾—æšæ•°è¡¨ç¤ºè©•ä¾¡
            if (maisuDisplay === '331') {
                scores[6] += 200;
                judgements.push({ label: 'ç²å¾—æšæ•°è¡¨ç¤º', value: '331æš', judge: 'good', text: 'è¨­å®š6æ¿ƒåšï¼' });
            } else if (maisuDisplay === '543') {
                scores[3] += 100;
                scores[4] += 100;
                scores[5] += 100;
                scores[6] += 100;
                judgements.push({ label: 'ç²å¾—æšæ•°è¡¨ç¤º', value: '543æš', judge: 'good', text: 'è¨­å®š3ä»¥ä¸Šæ¿ƒåšï¼' });
            } else if (maisuDisplay === '174') {
                for (let i = 2; i <= 6; i++) scores[i] += 50;
                judgements.push({ label: 'ç²å¾—æšæ•°è¡¨ç¤º', value: '174æš', judge: 'good', text: 'è¨­å®š2ä»¥ä¸Šæ¿ƒåšï¼' });
            }

            // ãƒœãƒ¼ãƒŠã‚¹ç¢ºå®šç”»é¢è©•ä¾¡
            if (shinobuRed7 > 0) {
                scores[5] += 150;
                scores[6] += 150;
                judgements.push({ 
                    label: 'ãƒœãƒ¼ãƒŠã‚¹ç¢ºå®šç”»é¢', 
                    value: 'ã—ã®ã¶â†’èµ¤7', 
                    judge: 'good', 
                    text: 'è¨­å®š5ä»¥ä¸Šæ¿ƒåšï¼' 
                });
            }

            // ã‚¹ã‚³ã‚¢ã®æ­£è¦åŒ–ã¨è¡¨ç¤º
            const maxScore = Math.max(...Object.values(scores));
            let resultsHTML = '';
            
            for (let setting = 6; setting >= 1; setting--) {
                const percentage = maxScore > 0 ? (scores[setting] / maxScore * 100).toFixed(1) : 0;
                resultsHTML += `
                    <div class="result-item setting-${setting}">
                        <h3>è¨­å®š${setting}</h3>
                        <div class="probability">ä¿¡é ¼åº¦: ${percentage}%</div>
                        <div class="info-text">
                            æœŸå¾…ATç¢ºç‡: 1/${settingData[setting].at} | 
                            æœŸå¾…CZç¢ºç‡: 1/${settingData[setting].cz}
                        </div>
                    </div>
                `;
            }

            document.getElementById('settingResults').innerHTML = resultsHTML;

            // åˆ¤å®šçµæœè¡¨ç¤º
            let judgementsHTML = '';
            judgements.forEach(j => {
                judgementsHTML += `
                    <div class="judge-item">
                        <div>
                            <div class="judge-label">${j.label}</div>
                            <div style="color: #fff; margin-top: 3px;">${j.value}</div>
                        </div>
                        <div class="judge-result judge-${j.judge}">${j.text}</div>
                    </div>
                `;
            });

            document.getElementById('judgements').innerHTML = judgementsHTML;
            document.getElementById('results').style.display = 'block';

            // çµæœã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        function resetData() {
            if (confirm('å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’ã™ã¹ã¦ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
                document.querySelectorAll('input').forEach(input => input.value = '');
                document.querySelectorAll('.ending-btn').forEach(btn => btn.classList.remove('selected'));
                document.querySelectorAll('.trophy-btn').forEach(btn => btn.classList.remove('selected'));
                selectedScreens = [];
                selectedTrophy = null;
                document.getElementById('results').style.display = 'none';
            }
        }
    </script>
</body>
</html>
